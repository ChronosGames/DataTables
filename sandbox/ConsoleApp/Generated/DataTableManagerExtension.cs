// <auto-generated />
using System;
using System.IO;
using DataTables;

namespace ConsoleApp
{
    public static class DataTableManagerExtension
    {
        public static string[] Names = new string[]
        {
            "DRDataTableSample",
        };

        public static void CreateDataTable(this DataTableManager manager, string dataTableName, byte[] raw)
        {
            switch (dataTableName)
            {
                case "DRDataTableSample":
                    manager.CreateDataTable<DTDataTableSample>(raw, 0, raw.Length);
                    break;
                default:
                    throw new NotImplementedException($"Unknown DataTable: {dataTableName}");
            }
        }

        public static DataTableManager Create(string dataPath)
        {
            var manager = new DataTableManager();

            foreach (var className in Names)
            {
                var raw = File.ReadAllBytes(Path.Combine(dataPath, className + ".bytes"));
                manager.CreateDataTable(className, raw);
            }

            return manager;
        }
    }
}
