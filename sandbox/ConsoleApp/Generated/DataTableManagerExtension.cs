// <auto-generated />
using System;
using System.Collections.Generic;
using DataTables;

namespace ConsoleApp
{
public static class DataTableManagerExtension
{
    public static Dictionary<string, string[]> Tables = new Dictionary<string, string[]>
    {
        { "DRDataTableSample", Array.Empty<string>() },
        { "DRDataTableSplitSample", new string[] {"x001", "x002"} },
        { "DRMatrixSample", Array.Empty<string>() },
    };

        /// <summary>
        /// 预加载所有数据表。
        /// </summary>
        /// <param name="onCompleted">全部数据表预加载完成时回调。</param>
#pragma warning disable CS1573 // 参数在 XML 注释中没有匹配的 param 标记(但其他参数有)
        public static void Preload(this DataTableManager manager, Action onCompleted)
#pragma warning restore CS1573 // 参数在 XML 注释中没有匹配的 param 标记(但其他参数有)
        {
        int done = 4;

        void next()
        { 
            if (--done == 0)
                onCompleted?.Invoke(); 
        };

        manager.CreateDataTable<DTDataTableSample>(next);
        manager.CreateDataTable<DTDataTableSplitSample>("x001", next);
        manager.CreateDataTable<DTDataTableSplitSample>("x002", next);
        manager.CreateDataTable<DTMatrixSample>(next);
    }
}
}
