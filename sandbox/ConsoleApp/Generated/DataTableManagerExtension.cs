// <auto-generated />
using System;
using System.Collections.Generic;
using DataTables;

namespace ConsoleApp
{
    public static class DataTableManagerExtension
    {
        public static Dictionary<string, string[]> Tables = new Dictionary<string, string[]>
        {
            { "DRDataTableSample", Array.Empty<string>() },
            { "DRDataTableSplitSample", Array.Empty<string>() },
        };

        /// <summary>
        /// 预加载所有数据表。
        /// </summary>
        /// <param name="onCompleted">全部数据表预加载完成时回调。</param>
        public static void Preload(this DataTableManager manager, Action onCompleted)
        {
            int done = 2;

            void next()
            { 
                if (--done == 0)
                    onCompleted?.Invoke(); 
            };

            manager.CreateDataTable<DTDataTableSample>(next);
            manager.CreateDataTable<DTDataTableSplitSample>(next);
        }
    }
}
